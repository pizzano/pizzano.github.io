<html lang="nb">
<head>
  <meta charset="UTF-8">
  <title>KØL Grill & Pizza | Skarnes - Online Take Away Bestilling</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="icon" href="https://pizzano.github.io/img/s-logo.png" type="image/png">

  <!-- SEO Meta Tags -->
  <meta name="description" content="Nyt autentiske italienske pizzaer stekt i steinovn fra KØL Grill & Pizza i Skarnes. Vi tilbyr daglig fersk pizza, kebab, burgere og mer. Takeaway og hjemlevering tilgjengelig. Bestill online nå!">
  <meta name="keywords" content="KØL Grill & Pizza, Skarnes pizza, online pizza bestilling, takeaway, hjemlevering, burger, kebab, Italiensk pizza, Sør Odal, Årnes">
  
  <!-- Social Media Meta Tags -->
  <meta property="og:title" content="KØL Grill & Pizza | Skarnes - Online Pizza Bestilling">
  <meta property="og:description" content="Opplev ekte italiensk pizza hos KØL Grill & Pizza. Friske ingredienser og profesjonell steinovn. Takeaway og levering i Skarnes, Sør Odal og Årnes.">
  <meta property="og:url" content="https://bestill.online">
  <meta property="og:type" content="website">
</head>
  <style>
    body {
      background-color:#2655ad;
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      zoom: 95%;
      font-size: 18px;
    }
    
    .kapak {
    background-color: #4577d3;
    display: flex;
    align-items: center;
    flex-direction: column;
    flex-wrap: nowrap;
    border-style: solid;
    border-color: #3F51B5;
    border-width: 0px 1px;
    min-width: 330px;
    width: 99%;
    max-width: 500px;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
    }
    @media screen and (min-width: 768px) {
     .kapak {
       display:flex;
      zoom:80%;
      }
}
    .container {
      width: 90%;
      display: flex;
      flex-direction: column;
      align-items: center;
      background-color: #FFF;
      box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
      border-radius: 13px;
      margin-bottom: 15px;
      /* Eklendi */
    }

    .header,
    .footer {
      background-color: #3F51B5;
      height: 40px;
      color: white;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
          padding: 5px 1px 5px 1px;
    }

    .header {
      border-radius: 10px 10px 0 0;
      /* Güncellendi */
    }

    .footer {
      border-radius: 0 0 10px 10px;
      /* Güncellendi */
    }

    .main {
      display: flex;
      width: 100%;
      align-items: center;
      flex-direction: column;
      justify-content: center;
    }

    #kupon {
      margin: 10px;
      width: 100%;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      /* Merkeze alındı */
    }

.pizza-box {
      width: 17%;
      /* Genişlik % olarak ayarlandı */
      height: 120px;
      background-color: #d1c6c6;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-evenly;
      border-radius: 10%;
      margin: 1%;
      /* Her bir kutu arasında boşluk bırakıldı */
    }

.selected {
  background: #18c81f;
  border-color: black;
  color: white;
}

.pizza-img {
  animation: spin 5s linear infinite; /* Animasyon*/
  filter: grayscale(100%);
  height: 40px;
  object-fit: contain;
  transition: filter .5s, transform 1s; /* geçiş efektleri */
  width: 40px;
}
  #QRCODE{
  cursor:pointer;
    }
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

    @keyframes spinAndPulse {

      0%,
      100% {
        transform: scale(0.9) rotate(0deg);
      }

      12.5%,
      37.5%,
      62.5%,
      87.5% {
        transform: scale(1.1) rotate(-20deg);
      }

      25%,
      50%,
      75% {
        transform: scale(1) rotate(20deg);
      }
    }

    .inputKutusu {
      display: flex;
      width: 100%;
      /* veya başka bir genişlik değeri */
    }

    input {
      width: 100%;
      height: 50px;
      font-size: 22px;
      text-align: center;
      letter-spacing: 8px;
      border: none;
      background-color: white;
      color: black;
      font-weight: bold;
      outline: 1.5px solid;
    }

    .btn {
      width: 90%;
      height: 60px;
      box-shadow: 0px 7px 20px 3px rgb(0 0 0 / 66%);
      background-image: radial-gradient(circle, #219dffcc, #219dffbd, #3e51c057);
      font-weight: bold;
      font-size: 28px;
      color: white;
      border-radius: 11px;
     cursor:pointer;
    }

    .btn1 {
      animation: pulse 1s infinite;
           cursor:pointer;
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.05);
      }

      100% {
        transform: scale(1);
      }
    }

    transform: scale(1);
    /* İkonun orijinal boyutu */
    opacity: 1;
    /* Tam opaklık */
    }

    50% {
      transform: scale(1.2);
      /* İkonun %20 büyütülmüş hali */
      opacity: 0.5;
      /* Azaltılmış opaklık */
    }

    }
    h1 {
        color: #444; /* Başlık rengi */
    }
    ul {
        padding-left: 20px; /* Madde işaretlerinden boşluk */
    }
    li {  
      margin-bottom: 10px; /* Madde araları boşluk */
      padding: 3px;
    }
  </style>
</head>
<body>
<div id="kapak" class="kapak">
  <div id="statusMessage" class="container header" style="border-radius:0px 0px"></div>
  <br>
  <div id="deviceContent" class="container header btn"></div> <br>
<p style="color:gold;font-size:19px;">Digital kupong gjelder kun ved henting.</p>
  <div class="container">
    <div id="mobil_status" class="header">
      ✅ Nummeret ditt er registrert!
    </div>
    <div class="inputKutusu">
<input type="tel" id="mobilnr" placeholder="+47 ________" autocomplete="off" oninput="if (this.value.length === 8) this.blur()">

    </div>
    <div class="main">
      <div class="header" style="border-radius:0;"> Dine digitale kuponger ⓘ</div>
    <div id="gratis"></div>
    <div id="kupon"></div>
        <!-- Kuponlar JavaScript ile eklenecek -->
    </div>
    <div class="footer">
      Vi spanderer hver 11. stor pizza. ⓘ
    </div>
  </div>
  <br>  
  <div id="qrkodem" class="container">
    <div class="header">
      QR-koden skannes av betjeningen!
    </div>
    <div class="main">
      <img id="QRCODE">
    </div>
    <div id="qrkodelukk" class="footer">
      Klikk på QR-koden for å fremvise!
    </div>
  </div>
  <br> 
  <div id="vilkor" class="container header btn" style="height:40px;font-size:19px;">» Vilkår for lojalitetsprogram «</div> 
  <br>
  <div class="container">
    <div onclick="window.open('https://g.page/r/CaBYA1-Od59LEBM/review', '_blank');" class="header" style="border-radius: 10px 10px 10px;padding: 15px 0px 15px 0px;text-align: center;display: flex;justify-content: space-around;gap: 5px;flex-direction: column;cursor:pointer;">
      <div>Vurder oss på Google </div> <div>⭐⭐⭐⭐⭐ 4.9 </div> </div>
  </div>
  <br>
     </div>

  <div id="regler" class="container" style="display:none;" onclick="this.style.display = 'none'">
    <h4>KØL Grill & Pizza Lojalitetsprogram</h4>
    <ul>
        <li><strong>Medlemskap:</strong> Registrer mobilnummeret ditt for å motta en unik QR-kode som representerer ditt medlemskap og tilgang til digitale kuponger.</li>
        <li><strong>Kjøpe Pizzaer:</strong> Kjøp store pizzaer til full pris via vår nettside. Sørg for at personalet skanner QR-koden din ved henting slik at kjøpet registreres på din digitale kuponprofil.</li>
        <li><strong>Følg Fremgangen Din:</strong> For hver store pizza du kjøper, legges et digitalt stempel til din profil. Samle 10 stempler for å motta en gratis stor pizza.</li>
        <li><strong>Innløs din Gratis Pizza:</strong> Når du har samlet 10 digitale stempler og kjøper din neste store pizza, nevn at du vil innløse din gratis pizza. Ha QR-koden klar for skanning.</li>
        <li><strong>Betingelser:</strong> For hver 10 store pizzaer kjøpt til full pris, får du den 11. gratis ved henting. Digitale kuponger kan ikke registreres hvis kjøpet kombineres med andre rabatter eller tilbud, eller hvis det gjelder kjøp av liten pizza.</li>
        <li><strong>Fordeler:</strong> Bli med i lojalitetsprogrammet og spar omtrent 10 % på dine kjøp over tid. Dine digitale kuponger og fremgang er alltid tilgjengelig på telefonen din.</li>
        <li><strong>Endringer:</strong> Vi kan endre betingelser og vilkår når som helst.</li>
          ❌ Lukk
    </ul>
</div>
  
 <div id="fullScreenIframeContainer" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background-color:white; z-index:10000;">
    <img onclick="closeIframe()" src="https://bestill.online/img/btn1.png" style="position: absolute;bottom: 40px;right: 5px; z-index: 10001;width: 70px;" class="btn1">
    <iframe id="fullScreenIframe" class="testim" src="" style="width:100%; height:100%; border:none;"></iframe>
  </div>  
  
<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-database.js";

const app = initializeApp({
  databaseURL: "https://bestill-pizza-default-rtdb.europe-west1.firebasedatabase.app"
});

const db = getDatabase(app);

window.updateDatabaseReference = function(neden) {
  const dbRef = ref(db, `${mobilnr.value}`);
  const pizzaContainer = document.getElementById('kupon');
  pizzaContainer.innerHTML = "";

  for (let i = 1; i <= 10; i++) {
    pizzaContainer.innerHTML += `<div class="pizza-box" id="pizzaBox${i}">
      <span>${i}</span>
      <img src="https://bestill.online/img/pizza.png" alt="Pizza" class="pizza-img">
    </div>`;
  }

  // İlk veri yüklemesi için onValue kullanılır
  onValue(dbRef, snapshot => {

    if (snapshot.val() == 10) {
      gratis.innerHTML = `<img style="width:100%;" src="https://pizzano.github.io/img/gratis.gif">`;
    } else {
      gratis.innerHTML = null;
    }
    const selectedCount = snapshot.val() || 0;
    document.querySelectorAll('.pizza-box').forEach((box, index) => {
      const isSelected = index < selectedCount;
      box.classList.toggle('selected', isSelected);
      box.querySelector('.pizza-img').style.filter = isSelected ? 'grayscale(0%)' : 'grayscale(100%)';
      
      if (neden == true) {
      document.body.style ='';
      qrkodem.style = '';
      qrkodelukk.innerHTML = "Klikk på QR-koden for å fremvise!";
      document.getElementById('kapak').scrollIntoView({ behavior: 'smooth', block: 'start' });
      }

    });
  });
}

window.updateDatabaseReference(true);  // Fonksiyonu başlangıçta çağırın

window.adjustCount = function(increase) {
  const dbRef = ref(db, `${mobilnr.value}`);
  runTransaction(dbRef, currentValue => {
    currentValue = currentValue || 0;
    return increase ? Math.min(currentValue + 1, 10) : Math.max(currentValue - 1, 0);
  });
};

</script>
  
<script>
    // LocalStorage kontrolü ve numara yükleme
    mobilnr.value = localStorage.getItem('MOBIL') || ' ';
    document.addEventListener('DOMContentLoaded', function() {
      function updateMobileAndQRCode(event) {
        
        mobilnr.value = mobilnr.value.replace(/[^\d]/g, '').slice(0, 8);
        localStorage.setItem('MOBIL', mobilnr.value);
        var firstDigit = parseInt(mobilnr.value[0]);
        var invalidStartDigits = [0, 1, 2, 3, 5, 6, 7, 8];

if (event && event.type === 'input' && mobilnr.value.length >= 8 && !invalidStartDigits.includes(firstDigit)) {
    mobilnr.blur(); // İlk olarak input'tan odağı kaldır

    setTimeout(function() {
        document.getElementById('QRCODE').scrollIntoView({ behavior: 'smooth', block: 'center'});
        setTimeout(function() {
            // İlk kaydırmadan sonra, sayfayı en üste kaydırma işlemi
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }, 2000); // QR Code görünümünden 2 saniye sonra en üste kaydır
    }, 500); // Klavyenin kapanmasını beklemek için yeterli süre (örneğin 500 ms)
}

        
        mobil_status.innerHTML = '✍ Registrer deg nå!';
        QRCODE.style = "width:100%; padding:0px;";
        QRCODE.src = 'https://pizzano.github.io/img/stemp.jpg';
        
        window.updateDatabaseReference(); 
        
        if (mobilnr.value.length > 0 && invalidStartDigits.includes(firstDigit)) {
          mobil_status.innerHTML = '❌ Nummer må begynne med 4 og 9.';
          QRCODE.style = "width:100%; padding:0px;";
          QRCODE.src = 'https://pizzano.github.io/img/stemp.jpg';
        } else if (mobilnr.value.length >= 8 && !invalidStartDigits.includes(firstDigit)) {

          mobil_status.innerHTML = '✅ Nummeret ditt er registrert!';
          QRCODE.src = `https://api.qrserver.com/v1/create-qr-code/?data=pizzano.github.io/kayit.html?n=${mobilnr.value}`;
          QRCODE.style = "width:80%; padding:30px;";
        }
        
      }
      mobilnr.oninput = updateMobileAndQRCode;
      updateMobileAndQRCode(); // İlk yükleme için de çağır
    });

    vilkor.addEventListener('click', function() {
        regler.style = 'display: flex;position: fixed;top: 50%;left: 50%;transform: translate(-50%, -50%);padding: 100%;font-size:16px;';
  });
  
  QRCODE.addEventListener('click', function() {

    if (qrkodem.style.position !== 'fixed') {
      document.body.style=' visibility: hidden;'; // Tüm sayfanın arka planını bulanıklaştır
      qrkodem.style = 'display: flex; justify-content: space-between; position: fixed;top: 50%;left: 50%;transform: translate(-50%, -50%);z-index: 9999;visibility: visible; height: 90%;width: 90%;max-height:600px;max-width:600px;';

      qrkodelukk.innerHTML = "Klikk på QR-koden for å LUKKE!";
    } else {
      document.body.style ='';
      qrkodem.style = '';
      qrkodelukk.innerHTML = "Klikk på QR-koden for å fremvise!";
    }
    
  });
  
function setDocumentStyle(cssText) {
    document.documentElement.style.cssText = cssText;
}

function MenuStart() {
    setDocumentStyle('height: 100%; width: 100%; overflow: hidden; position: fixed; top: 0; left: 0;');
    document.getElementById('fullScreenIframe').src = "https://www.foodbooking.com/api/fb/_q_y_w_r6";
    document.getElementById('fullScreenIframeContainer').style.display = 'block';
}

function closeIframe() {
    setDocumentStyle('');
    document.getElementById('fullScreenIframeContainer').style.display = 'none';
    document.getElementById('fullScreenIframe').src = '';
}
  
    function detectDevice() {
      // LocalStorage'dan cihaz bilgisini deneyin
      var storedDevice = localStorage.getItem('deviceType');
      // Eğer cihaz tipi zaten kaydedilmişse, ilgili içeriği hemen döndür
      if (storedDevice) {
        return storedDevice === 'iOS' ?
          `<div class="btn1" onclick="window.location.href='https://www.foodbooking.com/api/fb/_q_y_w_r6';">» Bestill TakeAway «</div>` :
          `<div class="btn1" onclick="MenuStart();">» Bestill TakeAway «</div>`;
      }
      // Cihaz bilgisi localStorage'da yoksa, userAgent ile kontrol edin
      var ua = navigator.userAgent || navigator.vendor || window.opera;
      var isIOS = /iPad|iPhone|iPod/.test(ua) && !window.MSStream;
      var deviceType = isIOS ? 'iOS' : 'Other';
      // Cihaz türünü localStorage'a kaydedin
      localStorage.setItem('deviceType', deviceType);
      // iOS için özel link, diğer cihazlar için genel menü fonksiyonu
      return isIOS ?
        `<div class="btn1" onclick="window.location.href='https://www.foodbooking.com/api/fb/_q_y_w_r6';">» Bestill TakeAway «</div>` :
        `<div class="btn1" onclick="MenuStart();">» Bestill TakeAway «</div>`;
    }
    // DOM hazır olduğunda çalışacak şekilde içeriği ayarla
    document.addEventListener('DOMContentLoaded', function() {
      document.getElementById('deviceContent').innerHTML = `<p>${detectDevice()}</p>`;
    });

    function updateStatus() {
      const currentDate = new Date();
      const dayOfWeek = currentDate.getDay();
      const currentHour = currentDate.getHours();
      let statusMessage = document.getElementById("statusMessage");
      let themeColor = document.querySelector('meta[name="theme-color"]');
      if (!themeColor) {
        themeColor = document.createElement("meta");
        themeColor.name = "theme-color";
        document.head.appendChild(themeColor);
      }
      if (dayOfWeek === 2) { // Tirsdager
        statusMessage.textContent = `🚫 Restauranten er stengt på Tirsdager.`;
        statusMessage.style.backgroundColor = "#ef4e4b";
        themeColor.content = "#ef4e4b";
      } else if (currentHour >= 14 && currentHour < 21) {
        statusMessage.textContent = `🟢 Åpent i dag fra kl. 14:00 til 21:00`;
        statusMessage.style.backgroundColor = "#5ac15e";
        themeColor.content = "#5ac15e";
      } else {
        statusMessage.textContent = `🔴 Restauranten er stengt nå.`;
        statusMessage.style.backgroundColor = "#ef4e4b";
        themeColor.content = "#ef4e4b";
      }
    }
    updateStatus();
  </script>

</body>
</html>
