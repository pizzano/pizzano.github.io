<html lang="nb">
<head>
<meta charset="UTF-8">
<title>Charlie's Pizza Kristiansand - Online Pizza Bestilling</title>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover">
<meta http-equiv="X-UA-Compatible" content="ie=edge"> 
<meta name="keywords" content="Pizza, online bestilling, Charlie's Pizza, Kristiansand, takeaway, levering, Italiensk pizza" />
<meta name="description" content="Pizza til folket! Bestill pizza fra Charlie's Pizza. Ferske bunner hver dag. Takeaway og levering. Charlie's Pizza Kristiansand, online pizza bestilling nettsted. Ekte pizza med 100% italienske ingredienser, stekt i profesjonell stein-ovn." />
<script src="https://bestill.online/styles.js"></script>
<link rel="icon" type="image/png" href="https://bestill.online/img/icon-s.png">

<style>
* {
    -webkit-tap-highlight-color: rgba(0,0,0,0);
    -webkit-tap-highlight-color: transparent; 
    margin: 0;
    padding: 0;
  }
body, html {
    background-color: #0c4c98;
    font-family: Arial, sans-serif;
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: fixed;
    top:0;
    left:0;
  }
    @media screen and (min-width: 500px) {  }
  
  .header {
    overflow: auto;
    box-shadow: 0px 0px 10px 1px black;
    background-color: #1259aa;
    height: 100%;
    max-width:500px;
    margin:auto;
    gap: 30px;
  }
  .center {
  display: grid;
  place-items: center;
  }
  .size {
    zoom: 90%;
    min-width:300px;
	  max-width:450px;
    width:90%;
    cursor:pointer;
  }
  .baslik {
    background-color: #0f4079;
    border: 1px solid black;
    color: white;
    height: 50px;
    font-size: 18px;
  }
  .linkBtn {
    height: 60px;
    border-radius: 10px;
    box-shadow: 0px 7px 20px 3px rgb(0 0 0 / 66%);
    background-image: radial-gradient(circle, #219dffcc, #219dffbd, #3e51c057);
    font-weight: bold;
    font-size: 25px;
    color: white;
}
	@keyframes pulse1 {
    0% { transform: scale(1); }
    50% { transform: scale(1.02); }
    100% { transform: scale(1); }
}
	#mobilnr {
    height: 50px;
    font-size: 22px;
    text-align: center;
    letter-spacing: 8px;
    border: none;
    background-color: white;
    color:black;
    font-weight: bold;
}
	#mobilnr:focus {
    outline: 1px solid red;
}
	#mobilnr::placeholder{
    opacity: 0.6;
}
	#kupon {
    min-height: 170px;
    height: auto;
    font-size: 25px;
    background-color: white;
    display: flex;
    gap: 6%;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
    align-content: stretch;
}
	span.aktiv, span.pasif {
    width: 1.4em;
    height: 1.4em;
    padding: 4%;
    margin-top: 10px;
    margin-bottom: 10px;
    border-radius: 50%;
    color: #ffffff;
    background-color: #1c9f21;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1.3px dashed #555;
}
	span.pasif { 
    background-color: #9e9e9e82;
    color: #223255;
}
	#MenuBtn, .pulse {
    cursor: pointer;
    position: fixed;
    right: 10px;
    bottom: 40px;
    height: 50px;
    width: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 999;
}
	.pulse::before, .pulse::after {
    content: '';
    position: absolute;
    height: 100%;
    width: 100%;
    border-radius: 50%;
    box-shadow: 0 0 5px 2px #f00;
    animation: pulse 2s infinite;
}
	.pulse::after { animation-delay: 1s; }
  
	@keyframes pulse {
	0% { transform: scale(1); opacity: 1; }
	100% { transform: scale(1.5); opacity: 0; }
}
	.saat {
    width: 100%;
    height: 50px;
}
	.full {
    display: grid;
	place-items: center;
    align-content: center;
    position: fixed;
    top: 0;
    left: 0;
    border:none;
    background-color:#000000ad;
    -webkit-backdrop-filter: blur(5px);
    backdrop-filter: blur(5px);
    width:100%;
    height:100%;
    overflow-y: auto;
}
	.on { visibility: visible; }
	.off { visibility: hidden; }
	.ust-radius { border-radius:10px 10px 0px 0px; }
	.alt-radius { border-radius:0px 0px 10px 10px; }
	li {
    background-color: #f6f6f6;
    border: 1px solid grey;
    padding: 15px;
    width: 90%;
    list-style-type:none;
}
	#kupon  img {
	width:50px;
}
  @keyframes yarimSonme {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}
</style>
</head>
<body>
  
<div class="header center">
<div class="saat center" id="saat"> <span id="hours"> *** </span> </div>

<div class="size center baslik linkBtn" style="animation: pulse1 1s infinite;" onclick="MenuStart();">¬ª Bestill Pizza Her ¬´</div>
  
<div class="center" style="width:100%;">
	<div id="register" class="size center baslik ust-radius"> Vennligst registrer nummeret ditt her! </div>
	
	<input type="tel" class="size center baslik" id="mobilnr" placeholder="+47 40000000" oninput="INPUT(this.value); this.value = this.value.replace(/[^\d]/g, '').slice(0, 8); if (this.value.length >= 8) this.blur();" autocomplete="off">
  
	<div class="size center baslik">Dine Digitale Kuponger</div>
  
	<div class="size baslik" id="kupon"> <!-- Content here --> </div>
  
<div class="size center baslik alt-radius">
<span>Vi spanderer hver 9. store pizza. 
<span class="linkBtn" style="background-image: radial-gradient(circle, #219dff00, #db313100, #3e51c057);font-size:20px;color:#FFEB3B;animation: yarimSonme 2s infinite ease-in-out;
" onclick="vilkor.classList.toggle('off');">‚ìò</span>
</span></div>

</div>
  
<div class="center" style="width:100%;" id="qrheader" onclick="this.classList.toggle('full'); document.querySelector('div').scrollTop = 0;">
	<div class="size center baslik ust-radius" onclick="event.stopPropagation();">QR-koden skannes av betjeningen!</div>
	<img class="size center" id="QRCODE" style="height:450px;border:1px solid black">
	<div class="size center baslik alt-radius">Klikk p√• QR-koden for √• fremvise!</div>
</div>
  
<div class="size center baslik linkBtn" style="margin-bottom:30px;font-size:20px;" onclick="vilkor.classList.toggle('off');">¬ª Vilk√•r for lojalitetsprogram ¬´</div>
	
<div onclick="MenuStart();" id="MenuBtn" class="pulse">
    <img id="MenuBtn1" src="https://bestill.online/img/btn.png" style="width: 100%; height: auto;">
</div>
  
<iframe id="IFRAME" class="full off" src="https://www.foodbooking.com/api/fb/_y55_q_j"></iframe>

<div id="vilkor" class="full off" onclick="vilkor.classList.toggle('off');" style="display: grid; align-content: center;">
  <div id="progress" class="center"> 0% </div>
<ol class="header size" id="Mydiv" style="max-width: 600px;gap: 2px;height:95%;background-color: #f6f6f600; box-shadow: 0px 0px 0px 0px black;">
<li class="baslik center ust-radius" style="height:20px;display: flex; justify-content: space-between;"> <span><b>Charlie's Pizza Lojalitetsprogram:</b></span>    <span style="float:left;cursor:pointer;">‚ùå</span></li>

<li><h3>Trinn 1: Registrering</h3></li>
<ol>
    <li>F√∏rst m√• du registrere mobilnummeret ditt for √• bli med i lojalitetsprogrammet.</li>
    <li>N√•r mobilnummeret er registrert, vil en unik QR-kode bli generert og knyttet til profilen din.</li>
    <li>Denne QR-koden vil bli brukt for √• legge til digitale stempler p√• profilen din hver gang du kj√∏per en stor pizza.</li>
    <li>For √• legge til et digitalt stempel p√• profilen din, m√• du f√• QR-koden din skannet av betjeningen hver gang du kj√∏per en stor pizza.</li>
</ol>

<li><h3>Trinn 2: Overv√•k Profilen Din</h3></li>
<ol>
    <li>Etter at QR-koden er skannet, vil en av de fem kupongene i profilen din skifte til gr√∏nn farge.</li>
    <li>Profilen din vil ogs√• vise informasjon om antall Stor pizzaer du m√• kj√∏pe for √• f√• en gratis.</li>
</ol>

<li><h3>Trinn 3: Motta Gratis Stor Pizza</h3></li>
<ol>
    <li>Etter √• ha kj√∏pt fem store pizzaer f√•r du en melding i profilen din.</li>
    <li>Meldingen vil si at en "Gratis Stor Pizza"-kupong er n√• aktiv i profilen din.</li>
</ol>

<li><h3>Trinn 4: Hvordan Bruke Din Gratis Pizza</h3></li>
<ol>
    <li>For √• f√• den gratis Stor pizzaen, kan du enten bestille via telefon.</li>
    <li>Hvis det ikke er mulig, kan du bestille fra "Bestill.online"-siden. Husk √• velge "Kontant betaling" og legg til notatet "9. pizza gratis".</li>
</ol>

<li><h3>Betingelser</h3></li>
<ul>
    <li>Den 9. gratis pizzaen gjelder kun for 1 Stor pizza og ved henting.</li>
    <li>Lojalitetsgaven kan ikke brukes p√• 'lag din egen' pizza.</li>
</ul>

<li><h3>Fordeler med Programmet</h3></li>
<ul>
    <li>Du kan spare penger ved √• f√• hver 9. Stor pizza gratis.</li>
    <li>Det digitale stempelkortet er alltid tilgjengelig p√• telefonen din, s√• du risikerer ikke √• miste eller glemme det.</li>
</ul>

<li><h3>Vilk√•r og Betingelser</h3></li>
<li>Charlie's Pizza har rett til √• oppdatere betingelser og vilk√•r med umiddelbar effekt.</li>
<li class="baslik center alt-radius" style="height:20px;display: flex;justify-content: space-evenly;"> <div onclick="event.stopPropagation(); Mydiv.scrollTop = 0;">‚§¥Ô∏è G√• Opp</div> <div>‚ùå Lukk </div> </li>
  </ol>
	</div>
  
</div>
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js";
    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-database.js";
    
    const firebaseConfig = { databaseURL: `https://bestill-pizza-default-rtdb.europe-west1.firebasedatabase.app` };
    initializeApp(firebaseConfig);
    const database = getDatabase();
	//${x}
	
    mobilnr.value = localStorage.getItem('MOBIL');
    INPUT(mobilnr.value);
        
	for (let index = 1; index <= 8; index++) {
    let green = index * 10; 
    kupon.innerHTML += `<span class="aktiv" style="background-color: rgb(${green}, 160, ${green});"><img src="https://bestill.online/img/load.gif"></span>`;
}

    function guncelle() {

	localStorage.setItem('MOBIL', mobilnr.value);
        
	let specificKey = localStorage.getItem('MOBIL');
	if (!specificKey) { specificKey = '0'; }
                    
	const firstDigit = parseInt(specificKey[0]);
    const invalidStartDigits = [0, 1, 2, 3, 5, 6, 7, 8];
    
if (mobilnr.value.length < 8 || invalidStartDigits.includes(firstDigit)) {
    QRCODE.src = "https://bestill.online/img/stemp.jpg";
} else if (mobilnr.value) {
    QRCODE.src = `https://chart.googleapis.com/chart?cht=qr&chl=bestill.online/kayit.html?n=${encodeURIComponent(specificKey)}&chs=400x400&chld=L|0`;
} else {
    QRCODE.src = "https://bestill.online/img/stemp.jpg";
}

      
        
	const specificKeyReference = ref(database, specificKey);

	onValue(specificKeyReference, (snapshot) => {
		const value = snapshot.val();
		kupon.innerHTML = '';
		for (let index = 1; index <= 8; index++) {
		kupon.innerHTML += `${index <= value ? '<span class="aktiv">'+ index +'</span>' : '<span class="pasif">'+ index +'</span>'}`;
            }
	if (value == 8) { kupon.innerHTML = `<img style="width:100%;background-color: black;" src="https://bestill.online/img/gratis.gif?raw=true" class="">`; }

	});
    }
    
	mobilnr.addEventListener("input", guncelle);
    guncelle();
</script>

<script>
    function sendSMS() {
    var mobil = document.getElementById('mobil').value;
    var message = document.getElementById('message').value;

    if (!mobil) {
      alert('Vennligst skriv inn et mobilnummer.');
      return;
    }

    if (mobil.length < 8 || mobil.length > 8) {
      alert('Mobilnummeret m√• v√¶re minst 8 siffer.');
      return;
    }

    window.location.href = `sms:${mobil}?body=${encodeURIComponent(message)}`;
  }
 
Mydiv.onscroll = function() {
	var scrollPosition = Mydiv.scrollTop;
	var divHeight = Mydiv.scrollHeight - Mydiv.clientHeight;
	var progres = (scrollPosition / divHeight) * 90;
	progress.style.cssText = `border-radius:5px;height: 13px; max-width:540px; font-size:13px;width: ${progres.toFixed(0)}%; background-color: #21b027;`;
	progress.innerHTML = `${Math.ceil(progres*1.11)}%`;
};
 
	let canClick = false;
	setTimeout(() => { canClick = true; }, 5 * 60 * 1000); // 6 min delay

function MenuStart() {
	saat.scrollIntoView({ behavior: "smooth", block: "start"});

    IFRAME.classList.toggle('off');
    qrheader.classList.remove('full');
    vilkor.classList.add('off');
  
  if (MenuBtn1.src === "https://bestill.online/img/btn.png") {
    MenuBtn1.src = "https://bestill.online/img/btn1.png";
    } else {
    if (canClick) { location.reload(); }
    MenuBtn1.src = "https://bestill.online/img/btn.png";
    } 
}

function INPUT(inp) { 
    
    const firstDigit = parseInt(inp[0]);
    const invalidStartDigits = [0, 1, 2, 3, 5, 6, 7, 8];

    if (invalidStartDigits.includes(firstDigit)) {
        register.innerHTML = `‚ùå Nr m√• begynne med 4 og 9.`;
        QRCODE.src = "https://bestill.online/img/stemp.jpg";
    } else if (inp.length === 8 && !invalidStartDigits.includes(firstDigit)) {
        register.innerHTML = `‚úÖ Nummeret ditt er registrert!`;
    } else {
        register.innerHTML = `Vennligst registrer nummeret ditt her!`;
    }
}
  
function updateStatus() {
  const currentDate = new Date();
  const dayOfWeek = currentDate.getDay();
  const currentHour = currentDate.getHours();

  let themeColor = document.querySelector('meta[name="theme-color"]');

  if (!themeColor) {
    themeColor = document.createElement("meta");
    themeColor.name = "theme-color";
    document.head.appendChild(themeColor);
  }

  if (dayOfWeek === 1) { // Mandag
    hours.textContent = `üö´ Charlie's Pizza er stengt p√• mandager.`;
    saat.style ="background-color: #ef4e4b;font-size: 17px;color:white;"
    themeColor.content = "#ef4e4b";
    
  } else if (currentHour >= 14 && currentHour < 22) {
    hours.innerText  = `üü¢ √Öpent i dag fra kl. 14:00 til 22:00`;
    saat.style ="background-color: #5ac15e;font-size: 17px;color:white;"
    themeColor.content = "#5ac15e";

  } else {
    hours.innerText  = `üî¥ Charlie's Pizza er stengt n√•.`;
    saat.style ="background-color: #ef4e4b;font-size: 17px;color:white;"
    themeColor.content = "#ef4e4b";
  }

}
updateStatus();
setInterval(updateStatus, 1000 * 30); //30 saniye de acilis saatini guncelle.
</script>

</body>
</html>
