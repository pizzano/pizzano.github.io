<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sipariş Bilgilerini Çekme</title>
</head>
<body>
    <h1>Sipariş Bilgileri</h1>
    <button id="fetchOrders">Siparişleri Getir</button>
    <div id="orderResults"></div>

    <script>
        document.getElementById('fetchOrders').addEventListener('click', function() {
            fetch('https://pos.globalfoodsoft.com/pos/order/pop', {
                method: 'POST',
                headers: {
                    'Authorization': 'Bearer lA3OatvK6FneBxEiZd0ctLLEGogaPOCql',
                    'Accept': 'application/json',
                    'Glf-Api-Version': '1'
                }
            })
            .then(response => response.json())
            .then(data => {
                console.log(data);  // Konsolda gelen veriyi göster
                displayOrders(data);  // Ekranda siparişleri göster
            })
            .catch(error => console.error('Error fetching orders:', error));
        });

        function displayOrders(data) {
            const orderResults = document.getElementById('orderResults');
            orderResults.innerHTML = '';  // Önceki sonuçları temizle

            if (!data.orders || data.orders.length === 0) {
                orderResults.innerHTML = '<p>Hiç sipariş yok.</p>';
                return;
            }

            const ul = document.createElement('ul');
            data.orders.forEach(order => {
                const li = document.createElement('li');
                li.textContent = `Sipariş ID: ${order.id}, Teslim Zamanı: ${order.fulfill_time}, Toplam Tutar: ${order.total_price}`;
                ul.appendChild(li);
            });
            orderResults.appendChild(ul);
        }
    </script>
</body>
</html>
